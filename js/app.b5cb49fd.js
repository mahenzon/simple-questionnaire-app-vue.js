(function(t){function e(e){for(var s,i,u=e[0],a=e[1],l=e[2],p=0,d=[];p<u.length;p++)i=u[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s]);c&&c(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,u=1;u<n.length;u++){var a=n[u];0!==o[a]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={app:0},r=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/simple-questionnaire-app-vue.js/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=e,u=u.slice();for(var l=0;l<u.length;l++)e(u[l]);var c=a;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var s=n("85ec"),o=n.n(s);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Loading",{directives:[{name:"show",rawName:"v-show",value:!t.showSurvey,expression:"!showSurvey"}],attrs:{transition:"expand"}}),t.showSurvey?n("Survey",{attrs:{transition:"expand",questions:t.questions,summaryOptions:t.summaryOptions}}):t._e()],1)},r=[],i=(n("f9e3"),n("2dd8"),n("bc3a")),u=n.n(i),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",[t._v("Loading...")])},l=[],c={name:"LoadingDummy"},p=c,d=n("2877"),m=Object(d["a"])(p,a,l,!1,null,null,null),h=m.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-row",{staticClass:"justify-content-md-center"},[n("b-col",{attrs:{cols:"12",md:"10",lg:"8",xl:"6","align-g":"center"}},[n("b-progress",{attrs:{value:t.progressValue,max:t.maxProgressValue,"show-progress":"",animated:""}}),n("div",{staticClass:"my-2"},[n("Question",{directives:[{name:"show",rawName:"v-show",value:t.showQuestion,expression:"showQuestion"}],attrs:{question:t.currentQuestion},on:{sendAnswer:t.processAnswer}}),n("transition",{attrs:{name:"fade"}},[n("Summary",{directives:[{name:"show",rawName:"v-show",value:t.showSummary,expression:"showSummary"}],attrs:{results:t.collectedResults,summaryOptions:t.summaryOptions},on:{restart:t.resetQuestions}})],1)],1)],1)],1)],1)},b=[],v=(n("4160"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{"data-cy":"question"}},["text"===t.question.type?n("QuestionText",{attrs:{question:t.question},on:{sendAnswer:t.sendAnswer}}):t._e(),"email"===t.question.type?n("QuestionEmail",{attrs:{question:t.question},on:{sendAnswer:t.sendAnswer}}):t._e(),"select"===t.question.type?n("QuestionSelect",{attrs:{question:t.question},on:{sendAnswer:t.sendAnswer}}):t._e(),"bool"===t.question.type?n("QuestionBool",{attrs:{question:t.question},on:{sendAnswer:t.sendAnswer}}):t._e(),"info"===t.question.type?n("QuestionInfo",{attrs:{question:t.question},on:{sendAnswer:t.sendAnswer}}):t._e()],1)}),x=[],y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{title:t.question.text,"sub-title":t.question.subtitle}},[n("b-input",{attrs:{type:"text",placeholder:t.question.placeholder,state:t.inputDataValid},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendAnswer(e)}},model:{value:t.inputTextData,callback:function(e){t.inputTextData=e},expression:"inputTextData"}}),n("ButtonNext",{staticClass:"mt-2",attrs:{disabled:!t.inputDataValid,variant:t.buttonVariant,text:t.buttonText},on:{goNext:t.sendAnswer}})],1)},w=[],Q={props:{question:Object},data:function(){return{inputTextData:null}},methods:{sendAnswer:function(){this.inputDataValid&&(this.$emit("sendAnswer",{result:this.inputTextData}),this.inputTextData=null)}},computed:{buttonText:function(){return this.question.buttonText},inputDataValid:function(){return null},buttonVariant:function(){return this.inputDataValid?"primary":"dark"}}},_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button",{attrs:{block:"",disabled:t.disabled,variant:t.variant,"data-cy":"btnNext"},on:{click:function(e){return t.$emit("goNext")}}},[t._v(t._s(t.text||"Next"))])},q=[],O={name:"ButtonNext",props:{disabled:{type:Boolean,default:!1},variant:String,text:String}},g=O,N=Object(d["a"])(g,_,q,!1,null,null,null),S=N.exports,j={name:"QuestionText",mixins:[Q],components:{ButtonNext:S},computed:{inputDataValid:function(){return null===this.inputTextData?null:this.inputTextData.length>2}}},A=j,k=Object(d["a"])(A,y,w,!1,null,null,null),D=k.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{title:t.question.text,"sub-title":t.question.subtitle}},[n("b-input",{attrs:{type:"email",placeholder:t.question.placeholder,state:t.inputDataValid,formatter:t.formatter},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendAnswer(e)}},model:{value:t.inputTextData,callback:function(e){t.inputTextData=e},expression:"inputTextData"}}),n("ButtonNext",{staticClass:"mt-2",attrs:{disabled:!t.inputDataValid,variant:t.buttonVariant,text:t.buttonText},on:{goNext:t.sendAnswer}})],1)},C=[],E={name:"QuestionEmail",mixins:[Q],components:{ButtonNext:S},methods:{formatter:function(t){return t.toLowerCase()},validEmail:function(t){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)}},computed:{inputDataValid:function(){return null!==this.inputTextData?this.validEmail(this.inputTextData):null}}},V=E,$=Object(d["a"])(V,T,C,!1,null,null,null),P=$.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{title:t.question.text,"sub-title":t.question.subtitle}},[n("b-form-select",{attrs:{options:t.question.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),n("ButtonNext",{staticClass:"mt-2",attrs:{disabled:!t.selected,variant:t.selected?"primary":"dark"},on:{goNext:t.sendAnswer}})],1)},R=[],Y={name:"QuestionSelect",components:{ButtonNext:S},props:{question:Object},data:function(){return{selected:null}},methods:{sendAnswer:function(){this.$emit("sendAnswer",{result:this.selected}),this.selected=null}}},I=Y,L=Object(d["a"])(I,B,R,!1,null,null,null),J=L.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{title:t.question.text,"sub-title":t.question.subtitle}},[n("b-card-body",[n("b-button",{staticClass:"mx-1",attrs:{variant:t.variantNo,id:"btnNo"},on:{click:function(e){return t.processClick(!1)}}},[t._v(t._s(t.textNo))]),n("b-button",{staticClass:"mx-1",attrs:{variant:t.variantYes,id:"btnYes"},on:{click:function(e){return t.processClick(!0)}}},[t._v(t._s(t.textYes))])],1)],1)},z=[],Z={name:"QuestionBool",props:{question:Object},data:function(){return{variantNo:"danger",variantYes:"primary",textNo:"No",textYes:"Yes"}},methods:{processClick:function(t){this.$emit("sendAnswer",{result:t})}},created:function(){var t=this;this.question.customOption&&["variantNo","variantYes","textNo","textYes"].forEach((function(e){var n=t.question.customOption[e];n&&(t[e]=n)}))}},F=Z,G=Object(d["a"])(F,M,z,!1,null,null,null),H=G.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{staticClass:"text-center",attrs:{"border-variant":"info","bg-variant":"light",header:t.question.header||"Info header"}},[n("b-card-text",[t._v(t._s(t.question.text))]),n("ButtonNext",{attrs:{variant:t.question.buttonVariant||"primary",text:t.question.buttonText},on:{goNext:function(e){return t.$emit("sendAnswer",{})}}})],1)},U=[],W={name:"QuestionInfo",components:{ButtonNext:S},props:{question:Object}},X=W,tt=Object(d["a"])(X,K,U,!1,null,null,null),et=tt.exports,nt={name:"Question",components:{QuestionText:D,QuestionEmail:P,QuestionSelect:J,QuestionBool:H,QuestionInfo:et},props:{question:Object},methods:{sendAnswer:function(t){this.$emit("sendAnswer",t)}}},st=nt,ot=Object(d["a"])(st,v,x,!1,null,null,null),rt=ot.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{staticClass:"mb-2 mx-auto",attrs:{"data-cy":"summary","border-variant":"success"}},[n("b-card-title",[t._v(t._s(t.summaryOptions.header))]),n("b-card-text",[n("h5",[t._v(t._s(t.summaryOptions.text))])]),n("b-card-text",[n("b-list-group",t._l(t.resultsToShow,(function(t){return n("SummaryResult",{key:t._id,attrs:{question:t}})})),1)],1),n("b-button",{attrs:{block:"",variant:"outline-dark"},on:{click:function(e){return t.$emit("restart")}}},[t._v("Restart survey")])],1)},ut=[],at=(n("4de4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group-item",[n("div",{staticClass:"text-left"},[n("b",[t._v("Q:")]),t._v(" "+t._s(t.question.text)+" ")]),n("div",{staticClass:"text-left"},[n("b",[t._v("A:")]),t._v(" "+t._s(t.answerOutput)+" ")])])}),lt=[],ct=n("b85c"),pt={name:"SummaryResult",props:{question:Object},computed:{answerOutput:function(){var t=this.question.answer.result;if("bool"===this.question.type){if(this.question.customOption){var e=t?"textYes":"textNo",n=this.question.customOption[e];if(n)return n}return t?"Yes":"No"}if("select"===this.question.type){var s,o=Object(ct["a"])(this.question.options);try{for(o.s();!(s=o.n()).done;){var r=s.value,i=r.value,u=r.text;if(i===t)return u}}catch(a){o.e(a)}finally{o.f()}}return t}}},dt=pt,mt=Object(d["a"])(dt,at,lt,!1,null,null,null),ht=mt.exports,ft={name:"Summary",components:{SummaryResult:ht},props:{results:Array,summaryOptions:Object},computed:{resultsToShow:function(){return this.results.filter((function(t){return void 0!==t.answer.result}))}}},bt=ft,vt=Object(d["a"])(bt,it,ut,!1,null,null,null),xt=vt.exports,yt={name:"Survey",components:{Question:rt,Summary:xt},props:{questions:{type:Array,required:!0},summaryOptions:Object},data:function(){return{totalQuestions:0,totalQuestionsSteps:0,currentQuestion:{},showQuestion:!1,showSummary:!1,progressValue:0,maxProgressValue:0,answeredQuestions:[],collectedResults:[],localQuestions:[]}},created:function(){this.processNewData()},methods:{processNewData:function(){this.deepCopyIncomingQuestions(),this.processRawQuestions(),this.maxProgressValue=this.totalQuestionsSteps,this.resetQuestions()},processRawQuestions:function(){var t,e=this;this.localQuestions.forEach((function(n){e.totalQuestions++,e.totalQuestionsSteps++,e.processRawQuestion(n),t&&(t._nextQuestion=n),t=n}))},processRawQuestion:function(t){t._progress=this.totalQuestionsSteps,t._id="question-".concat(this.totalQuestions),this.resolveNestedQuestions(t)},resolveNestedQuestions:function(t){if(t.onChoice)for(var e in this.totalQuestionsSteps++,t.onChoice){this.totalQuestions++;var n=t.onChoice[e];this.processRawQuestion(n),n._parentQuestion=t}},processAnswer:function(t){this.currentQuestion.answer=t,this.answeredQuestions.push(this.currentQuestion);var e=this.resolveNextQuestion(t);if(null===e)return this.showAnswersSummary();this.progressValue=this.currentQuestion._progress,this.currentQuestion=e},getNextOrParent:function(t){return t._nextQuestion?t._nextQuestion:t._parentQuestion?this.getNextOrParent(t._parentQuestion):null},resolveNextQuestion:function(t){if(this.currentQuestion.onChoice){var e=this.currentQuestion.onChoice[t.result];return e||(console.error("Next question for",this.currentQuestion.text,t,"not specified! Full question data:",this.currentQuestion),null)}return this.getNextOrParent(this.currentQuestion)},showAnswersSummary:function(){this.showQuestion=!1,this.showSummary=!0,this.progressValue=this.totalQuestionsSteps,this.collectedResults=this.answeredQuestions},resetQuestions:function(){this.progressValue=0,this.currentQuestion=this.localQuestions[0],this.showSummary=!1,this.showQuestion=!0,this.answeredQuestions=[],this.collectedResults=[]},deepCopyIncomingQuestions:function(){var t=this;this.localQuestions=[],this.questions.forEach((function(e){t.localQuestions.push(JSON.parse(JSON.stringify(e)))}))}}},wt=yt,Qt=(n("638e"),Object(d["a"])(wt,f,b,!1,null,null,null)),_t=Qt.exports,qt={name:"App",components:{Survey:_t,Loading:h},data:function(){return{publicPath:"/simple-questionnaire-app-vue.js/",questions:[],summaryOptions:{},showSurvey:!1}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;u.a.get("".concat(this.publicPath,"data/questions.json")).then((function(e){e.data&&(e.data.questions&&(t.questions=e.data.questions),e.data.summaryOptions&&(t.summaryOptions=e.data.summaryOptions),t.showSurvey=!0)})).catch((function(t){console.error(t)}))}}},Ot=qt,gt=(n("034f"),Object(d["a"])(Ot,o,r,!1,null,null,null)),Nt=gt.exports,St=n("5f5b");s["default"].config.productionTip=!1,s["default"].use(St["a"]),new s["default"]({render:function(t){return t(Nt)}}).$mount("#app")},"638e":function(t,e,n){"use strict";var s=n("c721"),o=n.n(s);o.a},"85ec":function(t,e,n){},c721:function(t,e,n){}});
//# sourceMappingURL=app.b5cb49fd.js.map